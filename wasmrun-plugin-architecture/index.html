<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">

    
    <meta itemprop="name" content="Wasmrun Plugin Architecture | AniLog">
    <meta itemprop="description" content="In the [last article](https://blog.anirudha.dev/rust-plugin-system), I covered all different types of rust plugin architecture and approaches we could have done. Now, lets dive into the plugin architecture used in [wasmrun](https://github.com/anistark/wasmrun), an open-source WebAssembly runtime that supports multiple programming languages through a hybrid plugin system.">

    
    <meta name="twitter:title" content="Wasmrun Plugin Architecture | AniLog">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:description" content="In the [last article](https://blog.anirudha.dev/rust-plugin-system), I covered all different types of rust plugin architecture and approaches we could have done. Now, lets dive into the plugin architecture used in [wasmrun](https://github.com/anistark/wasmrun), an open-source WebAssembly runtime that supports multiple programming languages through a hybrid plugin system.">
    <meta name="twitter:site" content="@kranirudha">
    <meta name="twitter:creator" content="@kranirudha">
    <meta name="twitter:image:src" content="https://blog.anirudha.dev/twitter.png">

    
    <meta name="og:title" content="Wasmrun Plugin Architecture | AniLog">
    <meta name="og:description" content="In the [last article](https://blog.anirudha.dev/rust-plugin-system), I covered all different types of rust plugin architecture and approaches we could have done. Now, lets dive into the plugin architecture used in [wasmrun](https://github.com/anistark/wasmrun), an open-source WebAssembly runtime that supports multiple programming languages through a hybrid plugin system.">
    <meta name="og:image" content="https://blog.anirudha.dev/og.png">
    <meta name="og:url" content="https://blog.anirudha.dev/">
    <meta name="og:site_name" content="AniLog">
    <meta name="og:locale" content="en_GB">
    <meta name="og:type" content="website">

    <link rel="icon" type="image/png" href="/me.png" />

    <title>Wasmrun Plugin Architecture | AniLog</title>

    <link rel="stylesheet" href="/assets/main.bundle.css">

    <script>
      // Set theme before page renders to prevent flash
      (function() {
        const savedTheme = localStorage.getItem('theme') || 'dark';
        if (savedTheme === 'light') {
          document.documentElement.setAttribute('data-theme', 'light');
        }
      })();
    </script>

    
    <!-- Google tag (gtag.js) -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-YGZHVY9TD7"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-YGZHVY9TD7');
    </script>
    

    
  </head>
  <body class="flex flex-col min-h-screen">
    <header class="sticky top-0 z-50 glass-header">
  <nav class="container mx-auto max-w-5xl px-8 py-3 flex flex-wrap items-center justify-between">
    <div class="flex items-center gap-3">
      <a href="/" class="flex items-center gap-3">
        <img src="/ani.png" alt="AniLog logo" class="w-10 h-10 object-cover">
        <h1 class="text-2xl leading-none m-0">AniLog</h1>
      </a>
    </div>

    <div class="flex items-center gap-6">
      <button id="theme-toggle" class="theme-toggle" aria-label="Toggle theme">
        <svg class="sun-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <circle cx="12" cy="12" r="5"></circle>
          <line x1="12" y1="1" x2="12" y2="3"></line>
          <line x1="12" y1="21" x2="12" y2="23"></line>
          <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
          <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
          <line x1="1" y1="12" x2="3" y2="12"></line>
          <line x1="21" y1="12" x2="23" y2="12"></line>
          <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
          <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
        </svg>
        <svg class="moon-icon" xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"></path>
        </svg>
      </button>
    </div>
  </nav>
</header>
    <main class="container mx-auto max-w-5xl p-8 grow">
      
    <p></p>

    
        <div class="post-cover-image" style="background-image: url('/images/posts/6fee9dc3-7f7b-4afd-abec-65415a69b829.png');"></div>
    

    <div>
        <h2>Wasmrun Plugin Architecture</h2>

        

        
            <p class="excerpt">In the [last article](https://blog.anirudha.dev/rust-plugin-system), I covered all different types of rust plugin architecture and approaches we could have done. Now, lets dive into the plugin architecture used in [wasmrun](https://github.com/anistark/wasmrun), an open-source WebAssembly runtime that supports multiple programming languages through a hybrid plugin system.</p>
        

        
            <div class="mb-2">
                <a class="tag development" href="/tag/development">development</a><a class="tag webassembly" href="/tag/webassembly">webassembly</a><a class="tag plugins" href="/tag/plugins">plugins</a><a class="tag architecture" href="/tag/architecture">architecture</a><a class="tag rust" href="/tag/rust">rust</a><a class="tag wasm" href="/tag/wasm">wasm</a><a class="tag wasmrun" href="/tag/wasmrun">wasmrun</a>
            </div>
        

        
            
                <p class="text-sm italic">Created on
                    <span datetime="Fri Sep 05 2025 00:00:00 GMT+0000 (Coordinated Universal Time)">September 5, 2025</span>.</p>
            
        

        <div class="content post">
            
                <hr />

                <h3>Table of Contents</h3>

                <nav class="toc">
                <ol>
                    
                    <li><a href="#why-plugins-in-wasmrun">Why Plugins in Wasmrun</a>
            		</li>

                    <li><a href="#wasmrun-implementation%3A-hybrid-built-in-%2B-external">wasmrun Implementation: Hybrid Built-in + External</a>
            		</li>

                    <li><a href="#the-trait-foundation">The Trait Foundation</a>
            		</li>

                    <li><a href="#plugin-information-structure">Plugin Information Structure</a>
            		</li>

                    <li><a href="#built-in-plugins%3A-the-foundation">Built-in Plugins: The Foundation</a>
            		</li>

                    <li><a href="#built-in-plugin-loading">Built-in Plugin Loading</a>
            		</li>

                    <li><a href="#external-plugins%3A-the-interesting-part">External Plugins: The Interesting Part</a>
            
                <ol>
                    
                    <li><a href="#the-cargo-install-approach">The cargo install approach</a>
            		</li>

                    <li><a href="#plugin-directory-structure">Plugin Directory Structure</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#ffi-and-dynamic-loading">FFI and Dynamic Loading</a>
            
                <ol>
                    
                    <li><a href="#ffi-interface">FFI Interface</a>
            		</li>

                    <li><a href="#external-builder-implementation">External Builder Implementation</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#plugin-manager-integration">Plugin Manager Integration</a>
            		</li>

                    <li><a href="#advanced-features">Advanced Features</a>
            
                <ol>
                    
                    <li><a href="#plugin-health-monitoring">Plugin Health Monitoring</a>
            		</li>

                    <li><a href="#plugin-updates-and-version-management">Plugin Updates and Version Management</a>
            		</li>

                    <li><a href="#enhanced-build-configuration">Enhanced Build Configuration</a>
            		</li>

                    <li><a href="#plugin-capabilities-system">Plugin Capabilities System</a>
            		</li>
                </ol>
            		</li>

                    <li><a href="#current-built-in-languages">Current Built-in Languages</a>
            		</li>

                    <li><a href="#external-plugin-ecosystem">External Plugin Ecosystem</a>
            		</li>
                </ol>
            </nav>

                <hr />
            

            <p>In the <a href="https://blog.anirudha.dev/rust-plugin-system">last article</a>, I covered all different types of rust plugin architecture and approaches we could have done. Now, lets dive into the plugin architecture used in <a href="https://github.com/anistark/wasmrun">wasmrun</a>, an open-source WebAssembly runtime that supports multiple programming languages through a hybrid plugin system.</p>
<h2 id="why-plugins-in-wasmrun" tabindex="-1">Why Plugins in Wasmrun</h2>
<p>Wasmrun intends to support multiple programming languages like Rust, Go, C/C++, AssemblyScript, Python and each language has its own:</p>
<ul>
<li>
<p><strong>Compilation toolchain</strong> (rustc, tinygo, emcc, asc, py2wasm)</p>
</li>
<li>
<p><strong>Project structure conventions</strong> (Cargo.toml, go.mod, Makefile, package.json)</p>
</li>
<li>
<p><strong>Optimization strategies</strong> and output formats</p>
</li>
<li>
<p><strong>Development workflow</strong> requirements</p>
</li>
</ul>
<p>Initially, we had all language support built directly into the binary:</p>
<pre class="language-rust"><code class="language-rust"><span class="token comment">// This was getting unwieldy fast</span><br><span class="token keyword">match</span> language <span class="token punctuation">{</span><br>    <span class="token string">"c"</span> <span class="token operator">=></span> <span class="token function">compile_c_project</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token string">"cpp"</span> <span class="token operator">=></span> <span class="token function">compile_cpp_project</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token string">"assemblyscript"</span> <span class="token operator">=></span> <span class="token function">compile_as_project</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token string">"python"</span> <span class="token operator">=></span> <span class="token function">compile_python_project</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token comment">// External plugins would require subprocess calls</span><br>    <span class="token string">"rust"</span> <span class="token operator">=></span> <span class="token function">subprocess_plugin</span><span class="token punctuation">(</span><span class="token string">"wasmrust"</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token string">"go"</span> <span class="token operator">=></span> <span class="token function">subprocess_plugin</span><span class="token punctuation">(</span><span class="token string">"wasmgo"</span><span class="token punctuation">,</span> path<span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token comment">// ... and growing</span><br><span class="token punctuation">}</span></code></pre>
<p>The issues became clear:</p>
<ul>
<li>
<p><strong>Monolithic binary</strong> - Every user had to download support for all languages</p>
</li>
<li>
<p><strong>Tight coupling</strong> - Adding new language support required core changes</p>
</li>
<li>
<p><strong>Testing complexity</strong> - Each language change could break others</p>
</li>
<li>
<p><strong>Community contributions</strong> - External developers couldn’t easily add language support</p>
</li>
</ul>
<h2 id="wasmrun-implementation%3A-hybrid-built-in-%2B-external" tabindex="-1"><code>wasmrun</code> Implementation: Hybrid Built-in + External</h2>
<p>Initially I started with trying to extend usage with same Traits to external as built-in plugins which would have made creating external plugins easy and also the migration process. However, it soon became an ant hill of issues. A good approach in this would have been to create a common <code>wasmrun_core</code> crate and import for both. However, I want to keep things at minimal changes and not introduce a new dependency so as to increase <code>wasmrun</code> maintainability before testing the concept. Another easy option was to run the external plugins as binary directly. However, this would have reduced the customisations that you’d be able to do on the runtime itself. A version of me would argue that this should have been the safest first step, but who cares about playing safe.</p>
<p>After evaluating different approaches, I settled on a hybrid system that combines the benefits of multiple strategies:</p>
<ul>
<li>
<p><strong>Built-in plugins</strong> using trait objects for core language support</p>
</li>
<li>
<p><strong>External plugins</strong> using FFI for extensibility</p>
</li>
<li>
<p><strong>Fallback subprocess execution</strong> when FFI loading fails. We’ll remove this in future as we move to more tested approach.</p>
</li>
</ul>
<p>This gives us type safety and performance for core functionality, while still allowing runtime extensibility.</p>
<h2 id="the-trait-foundation" tabindex="-1">The Trait Foundation</h2>
<p>The key insight was to design traits that work identically for both built-in and external plugins:</p>
<pre class="language-rust"><code class="language-rust"><span class="token comment">// src/plugin/mod.rs</span><br><span class="token keyword">pub</span> <span class="token keyword">trait</span> <span class="token type-definition class-name">Plugin</span><span class="token punctuation">:</span> <span class="token class-name">Send</span> <span class="token operator">+</span> <span class="token class-name">Sync</span> <span class="token punctuation">{</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">info</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span><span class="token class-name">PluginInfo</span><span class="token punctuation">;</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">can_handle_project</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> project_path<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">bool</span><span class="token punctuation">;</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">get_builder</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token class-name">WasmBuilder</span><span class="token operator">></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span><br><br><span class="token comment">// src/compiler/builder.rs</span><br><span class="token keyword">pub</span> <span class="token keyword">trait</span> <span class="token type-definition class-name">WasmBuilder</span><span class="token punctuation">:</span> <span class="token class-name">Send</span> <span class="token operator">+</span> <span class="token class-name">Sync</span> <span class="token punctuation">{</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">language_name</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">;</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">entry_file_candidates</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">supported_extensions</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span><span class="token punctuation">[</span><span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">]</span><span class="token punctuation">;</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">check_dependencies</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">;</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">build</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> config<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">BuildConfig</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">CompilationResult</span><span class="token operator">&lt;</span><span class="token class-name">BuildResult</span><span class="token operator">></span><span class="token punctuation">;</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">validate_project</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> project_path<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">CompilationResult</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">;</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">can_handle_project</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> project_path<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">bool</span><span class="token punctuation">;</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">clean</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> project_path<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span><span class="token punctuation">;</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">clone_box</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token class-name">WasmBuilder</span><span class="token operator">></span><span class="token punctuation">;</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="plugin-information-structure" tabindex="-1">Plugin Information Structure</h2>
<pre class="language-rust"><code class="language-rust"><span class="token attribute attr-name">#[derive(Debug, Clone, Serialize, Deserialize)]</span><br><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">PluginInfo</span> <span class="token punctuation">{</span><br>    <span class="token keyword">pub</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> version<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> description<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> author<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> extensions<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> entry_files<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> plugin_type<span class="token punctuation">:</span> <span class="token class-name">PluginType</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> source<span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">PluginSource</span><span class="token operator">></span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> dependencies<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> capabilities<span class="token punctuation">:</span> <span class="token class-name">PluginCapabilities</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><br><br><span class="token attribute attr-name">#[derive(Debug, Clone, Serialize, Deserialize)]</span><br><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">PluginCapabilities</span> <span class="token punctuation">{</span><br>    <span class="token keyword">pub</span> compile_wasm<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> compile_webapp<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> live_reload<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> optimization<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> custom_targets<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> supported_languages<span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">>></span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><br><br><span class="token attribute attr-name">#[derive(Debug, Clone, Serialize, Deserialize)]</span><br><span class="token keyword">pub</span> <span class="token keyword">enum</span> <span class="token type-definition class-name">PluginSource</span> <span class="token punctuation">{</span><br>    <span class="token class-name">CratesIo</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> version<span class="token punctuation">:</span> <span class="token class-name">String</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token class-name">Git</span> <span class="token punctuation">{</span> url<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span> branch<span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br>    <span class="token class-name">Local</span> <span class="token punctuation">{</span> path<span class="token punctuation">:</span> <span class="token class-name">PathBuf</span> <span class="token punctuation">}</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="built-in-plugins%3A-the-foundation" tabindex="-1">Built-in Plugins: The Foundation</h2>
<p>Built-in plugins are straightforward. They’re just structs implementing the traits, compiled directly into the binary. The current built-in plugins are C/C++, AssemblyScript, and Python. Earlier rust and go were also built-in but have successfully migrated them external. Soon the plan is to move all language built-in plugins to external.</p>
<pre class="language-rust"><code class="language-rust"><span class="token comment">// src/plugin/languages/c_plugin.rs</span><br><span class="token attribute attr-name">#[derive(Clone)]</span><br><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">CPlugin</span> <span class="token punctuation">{</span><br>    info<span class="token punctuation">:</span> <span class="token class-name">PluginInfo</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">impl</span> <span class="token class-name">CPlugin</span> <span class="token punctuation">{</span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">Self</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> info <span class="token operator">=</span> <span class="token class-name">PluginInfo</span> <span class="token punctuation">{</span><br>            name<span class="token punctuation">:</span> <span class="token string">"c"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            version<span class="token punctuation">:</span> <span class="token macro property">env!</span><span class="token punctuation">(</span><span class="token string">"CARGO_PKG_VERSION"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            description<span class="token punctuation">:</span> <span class="token string">"C WebAssembly compiler using Emscripten"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            author<span class="token punctuation">:</span> <span class="token string">"Wasmrun Team"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            extensions<span class="token punctuation">:</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token string">"c"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"h"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>            entry_files<span class="token punctuation">:</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token string">"main.c"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"Makefile"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>            plugin_type<span class="token punctuation">:</span> <span class="token class-name">PluginType</span><span class="token punctuation">::</span><span class="token class-name">Builtin</span><span class="token punctuation">,</span><br>            source<span class="token punctuation">:</span> <span class="token class-name">None</span><span class="token punctuation">,</span><br>            dependencies<span class="token punctuation">:</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>            capabilities<span class="token punctuation">:</span> <span class="token class-name">PluginCapabilities</span> <span class="token punctuation">{</span><br>                compile_wasm<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>                compile_webapp<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>                live_reload<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>                optimization<span class="token punctuation">:</span> <span class="token boolean">true</span><span class="token punctuation">,</span><br>                custom_targets<span class="token punctuation">:</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token string">"wasm"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"web"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>                supported_languages<span class="token punctuation">:</span> <span class="token class-name">Some</span><span class="token punctuation">(</span><span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token string">"c"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token string">"cpp"</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            <span class="token punctuation">}</span><span class="token punctuation">,</span><br>        <span class="token punctuation">}</span><span class="token punctuation">;</span><br>        <span class="token keyword">Self</span> <span class="token punctuation">{</span> info <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">impl</span> <span class="token class-name">Plugin</span> <span class="token keyword">for</span> <span class="token class-name">CPlugin</span> <span class="token punctuation">{</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">info</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span><span class="token class-name">PluginInfo</span> <span class="token punctuation">{</span><br>        <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>info<br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">fn</span> <span class="token function-definition function">can_handle_project</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> project_path<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">bool</span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> path <span class="token operator">=</span> <span class="token class-name">Path</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>project_path<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token comment">// Check for Makefile or main.c files</span><br>        path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"Makefile"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">||</span> path<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"main.c"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">fn</span> <span class="token function-definition function">get_builder</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token class-name">WasmBuilder</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">CWasmBuilder</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="built-in-plugin-loading" tabindex="-1">Built-in Plugin Loading</h2>
<p>All built-in plugins are loaded through a centralized system:</p>
<pre class="language-rust"><code class="language-rust"><span class="token comment">// src/plugin/builtin.rs</span><br><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">load_all_builtin_plugins</span><span class="token punctuation">(</span>plugins<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token class-name">Plugin</span><span class="token operator">>></span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span><br>    <span class="token comment">// C plugin</span><br>    <span class="token keyword">let</span> c_plugin <span class="token operator">=</span> <span class="token class-name">Arc</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">CPlugin</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">BuiltinPlugin</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>c_plugin<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// AssemblyScript plugin</span><br>    <span class="token keyword">let</span> asc_plugin <span class="token operator">=</span> <span class="token class-name">Arc</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">AscPlugin</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">BuiltinPlugin</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>asc_plugin<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Python plugin</span><br>    <span class="token keyword">let</span> python_plugin <span class="token operator">=</span> <span class="token class-name">Arc</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">PythonPlugin</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    plugins<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span><span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">BuiltinPlugin</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span>python_plugin<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="external-plugins%3A-the-interesting-part" tabindex="-1">External Plugins: The Interesting Part</h2>
<p>External plugins are where things get interesting. The challenge was making them feel identical to built-in plugins while being loaded dynamically.</p>
<h3 id="the-cargo-install-approach" tabindex="-1">The <code>cargo install</code> approach</h3>
<p>I wanted plugin installation to feel familiar to Rust developers:</p>
<ol>
<li>
<p><strong>Download</strong>: Uses <code>cargo install</code> to build the plugin</p>
</li>
<li>
<p><strong>Storage</strong>: Installs to <code>~/.wasmrun/plugins/{plugin_name}/</code></p>
</li>
<li>
<p><strong>Registration</strong>: Updates wasmrun config with plugin capabilities as mentioned in the plugin <code>Cargo.toml</code></p>
</li>
<li>
<p><strong>Ready</strong>: Plugin automatically handles supported projects</p>
</li>
</ol>
<pre class="language-rust"><code class="language-rust"><span class="token comment">// src/plugin/installer.rs</span><br><span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">install_plugin</span><span class="token punctuation">(</span>plugin_name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">InstallationResult</span><span class="token operator">></span> <span class="token punctuation">{</span><br>    <span class="token comment">// Validate plugin exists on crates.io</span><br>    <span class="token keyword">if</span> <span class="token operator">!</span><span class="token class-name">PluginRegistry</span><span class="token punctuation">::</span><span class="token function">validate_plugin</span><span class="token punctuation">(</span>plugin_name<span class="token punctuation">)</span><span class="token operator">?</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token class-name">Err</span><span class="token punctuation">(</span><span class="token class-name">WasmrunError</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token macro property">format!</span><span class="token punctuation">(</span><span class="token string">"Plugin '{plugin_name}' not found"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">let</span> wasmrun_root <span class="token operator">=</span> <span class="token namespace">dirs<span class="token punctuation">::</span></span><span class="token function">home_dir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">ok_or</span><span class="token punctuation">(</span><span class="token string">"Could not determine home directory"</span><span class="token punctuation">)</span><span class="token operator">?</span><br>        <span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">".wasmrun"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Install using cargo to ~/.wasmrun/</span><br>    <span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token namespace">std<span class="token punctuation">::</span>process<span class="token punctuation">::</span></span><span class="token class-name">Command</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token string">"cargo"</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">args</span><span class="token punctuation">(</span><span class="token punctuation">[</span><br>            <span class="token string">"install"</span><span class="token punctuation">,</span> <br>            plugin_name<span class="token punctuation">,</span> <br>            <span class="token string">"--root"</span><span class="token punctuation">,</span> <br>            <span class="token operator">&amp;</span>wasmrun_root<span class="token punctuation">.</span><span class="token function">to_string_lossy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">]</span><span class="token punctuation">)</span><br>        <span class="token punctuation">.</span><span class="token function">output</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br><br>    <span class="token keyword">if</span> <span class="token operator">!</span>output<span class="token punctuation">.</span>status<span class="token punctuation">.</span><span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>        <span class="token keyword">return</span> <span class="token class-name">Err</span><span class="token punctuation">(</span><span class="token class-name">WasmrunError</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token string">"Plugin installation failed"</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// Create plugin directory and metadata</span><br>    <span class="token keyword">let</span> plugin_dir <span class="token operator">=</span> wasmrun_root<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"plugins"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span>plugin_name<span class="token punctuation">)</span><span class="token punctuation">;</span><br>    <span class="token namespace">std<span class="token punctuation">::</span>fs<span class="token punctuation">::</span></span><span class="token function">create_dir_all</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>plugin_dir<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Extract metadata from Cargo.toml</span><br>    <span class="token keyword">let</span> metadata <span class="token operator">=</span> <span class="token function">extract_plugin_metadata</span><span class="token punctuation">(</span>plugin_name<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br>    <span class="token function">save_plugin_metadata</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>plugin_dir<span class="token punctuation">,</span> <span class="token operator">&amp;</span>metadata<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br><br>    <span class="token comment">// Update wasmrun config</span><br>    <span class="token function">update_plugin_config</span><span class="token punctuation">(</span>plugin_name<span class="token punctuation">,</span> <span class="token operator">&amp;</span>metadata<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br><br>    <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token class-name">InstallationResult</span><span class="token punctuation">::</span><span class="token class-name">Success</span><span class="token punctuation">)</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="plugin-directory-structure" tabindex="-1">Plugin Directory Structure</h3>
<pre class="language-bash"><code class="language-bash">~/.wasmrun/<br>├── bin/                    <span class="token comment"># Plugin binaries installed via cargo</span><br>│   ├── wasmrust           <span class="token comment"># Plugin executable</span><br>│   └── wasmgo             <span class="token comment"># Plugin executable</span><br>├── plugins/               <span class="token comment"># Plugin metadata and dynamic libraries</span><br>│   ├── wasmrust/<br>│   │   ├── .wasmrun_metadata<br>│   │   ├── libwasmrust.dylib  <span class="token comment"># Dynamic library (optional)</span><br>│   │   └── target/<br>│   │       └── release/<br>│   │           └── libwasmrust.dylib<br>│   └── wasmgo/<br>│       ├── .wasmrun_metadata<br>│       └── libwasmgo.dylib<br>└── config.toml           <span class="token comment"># Plugin registry and configuration</span></code></pre>
<h2 id="ffi-and-dynamic-loading" tabindex="-1">FFI and Dynamic Loading</h2>
<p>External plugins are loaded as dynamic libraries using Rust’s Foreign Function Interface (FFI). This approach provides several advantages:</p>
<ul>
<li>
<p><strong>Performance</strong>: Direct function calls instead of subprocess execution</p>
</li>
<li>
<p><strong>Integration</strong>: Same trait interface as built-in plugins</p>
</li>
<li>
<p><strong>Efficiency</strong>: Shared memory space and reduced overhead</p>
</li>
</ul>
<h3 id="ffi-interface" tabindex="-1">FFI Interface</h3>
<pre class="language-rust"><code class="language-rust"><span class="token comment">// src/plugin/external.rs</span><br><span class="token keyword">use</span> <span class="token namespace">libloading<span class="token punctuation">::</span></span><span class="token class-name">Library</span><span class="token punctuation">;</span><br><br><span class="token comment">/// Generic wrapper for all external plugins</span><br><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">ExternalPluginWrapper</span> <span class="token punctuation">{</span><br>    info<span class="token punctuation">:</span> <span class="token class-name">PluginInfo</span><span class="token punctuation">,</span><br>    plugin_name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>    metadata<span class="token punctuation">:</span> <span class="token class-name">PluginMetadata</span><span class="token punctuation">,</span><br>    <span class="token attribute attr-name">#[cfg(not(target_os = <span class="token string">"windows"</span>))]</span><br>    library<span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">Arc</span><span class="token operator">&lt;</span><span class="token class-name">Library</span><span class="token operator">>></span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">impl</span> <span class="token class-name">ExternalPluginWrapper</span> <span class="token punctuation">{</span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span>plugin_path<span class="token punctuation">:</span> <span class="token class-name">PathBuf</span><span class="token punctuation">,</span> entry<span class="token punctuation">:</span> <span class="token class-name">ExternalPluginEntry</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> plugin_name <span class="token operator">=</span> entry<span class="token punctuation">.</span>info<span class="token punctuation">.</span>name<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>        <span class="token keyword">if</span> <span class="token operator">!</span><span class="token class-name">PluginUtils</span><span class="token punctuation">::</span><span class="token function">is_plugin_available</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>plugin_name<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> <span class="token class-name">Err</span><span class="token punctuation">(</span><span class="token class-name">WasmrunError</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token macro property">format!</span><span class="token punctuation">(</span><br>                <span class="token string">"Plugin '{plugin_name}' not available"</span><br>            <span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token comment">// Load metadata for ALL plugins</span><br>        <span class="token keyword">let</span> metadata <span class="token operator">=</span> <span class="token class-name">PluginMetadata</span><span class="token punctuation">::</span><span class="token function">from_installed_plugin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>plugin_path<span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">or_else</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>_<span class="token closure-punctuation punctuation">|</span></span> <span class="token class-name">PluginMetadata</span><span class="token punctuation">::</span><span class="token function">from_crates_io</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>plugin_name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br><br>        metadata<span class="token punctuation">.</span><span class="token function">validate</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br><br>        <span class="token attribute attr-name">#[cfg(not(target_os = <span class="token string">"windows"</span>))]</span><br>        <span class="token keyword">let</span> library <span class="token operator">=</span> <span class="token keyword">Self</span><span class="token punctuation">::</span><span class="token function">try_load_library</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>plugin_name<span class="token punctuation">,</span> <span class="token operator">&amp;</span>plugin_path<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br><br>        <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token keyword">Self</span> <span class="token punctuation">{</span><br>            info<span class="token punctuation">:</span> entry<span class="token punctuation">.</span>info<span class="token punctuation">,</span><br>            plugin_name<span class="token punctuation">,</span><br>            metadata<span class="token punctuation">,</span><br>            <span class="token attribute attr-name">#[cfg(not(target_os = <span class="token string">"windows"</span>))]</span><br>            library<span class="token punctuation">,</span><br>        <span class="token punctuation">}</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">impl</span> <span class="token class-name">Plugin</span> <span class="token keyword">for</span> <span class="token class-name">ExternalPluginWrapper</span> <span class="token punctuation">{</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">info</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token operator">&amp;</span><span class="token class-name">PluginInfo</span> <span class="token punctuation">{</span><br>        <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>info<br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">fn</span> <span class="token function-definition function">can_handle_project</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> path<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token keyword">bool</span> <span class="token punctuation">{</span><br>        <span class="token comment">// Try FFI first if library is available</span><br>        <span class="token attribute attr-name">#[cfg(not(target_os = <span class="token string">"windows"</span>))]</span><br>        <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>library<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>library <span class="token punctuation">{</span><br>                <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>exports<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>exports <span class="token punctuation">{</span><br>                    <span class="token comment">// Use FFI to call plugin's can_handle_project function</span><br>                    <span class="token comment">// ... FFI implementation details ...</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token comment">// Fallback to metadata-based checking</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">check_project_via_metadata</span><span class="token punctuation">(</span>path<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">fn</span> <span class="token function-definition function">get_builder</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token class-name">WasmBuilder</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token class-name">Box</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token class-name">ExternalWasmBuilder</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><br>            <span class="token keyword">self</span><span class="token punctuation">.</span>plugin_name<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            <span class="token keyword">self</span><span class="token punctuation">.</span>metadata<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            <span class="token attribute attr-name">#[cfg(not(target_os = <span class="token string">"windows"</span>))]</span><br>            <span class="token keyword">self</span><span class="token punctuation">.</span>library<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="external-builder-implementation" tabindex="-1">External Builder Implementation</h3>
<p>The external builder uses a hybrid approach - FFI when available, command execution as fallback:</p>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">ExternalWasmBuilder</span> <span class="token punctuation">{</span><br>    plugin_name<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>    metadata<span class="token punctuation">:</span> <span class="token class-name">PluginMetadata</span><span class="token punctuation">,</span><br>    <span class="token attribute attr-name">#[cfg(not(target_os = <span class="token string">"windows"</span>))]</span><br>    library<span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">Arc</span><span class="token operator">&lt;</span><span class="token class-name">Library</span><span class="token operator">>></span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">impl</span> <span class="token class-name">WasmBuilder</span> <span class="token keyword">for</span> <span class="token class-name">ExternalWasmBuilder</span> <span class="token punctuation">{</span><br>    <span class="token keyword">fn</span> <span class="token function-definition function">build</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> config<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">BuildConfig</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">CompilationResult</span><span class="token operator">&lt;</span><span class="token class-name">BuildResult</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token comment">// Try FFI first if available</span><br>        <span class="token attribute attr-name">#[cfg(not(target_os = <span class="token string">"windows"</span>))]</span><br>        <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>library<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>library <span class="token punctuation">{</span><br>                <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>exports<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>metadata<span class="token punctuation">.</span>exports <span class="token punctuation">{</span><br>                    <span class="token comment">// Use FFI to call plugin's build function</span><br>                    <span class="token comment">// ... FFI implementation details ...</span><br>                    <span class="token comment">// Return structured BuildResult</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token comment">// Fallback to command execution</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">build_via_command</span><span class="token punctuation">(</span>config<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">fn</span> <span class="token function-definition function">build_via_command</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> config<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token class-name">BuildConfig</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">CompilationResult</span><span class="token operator">&lt;</span><span class="token class-name">BuildResult</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token comment">// Find plugin binary in ~/.wasmrun/bin or system PATH</span><br>        <span class="token keyword">let</span> wasmrun_bin_path <span class="token operator">=</span> <span class="token namespace">dirs<span class="token punctuation">::</span></span><span class="token function">home_dir</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>home<span class="token closure-punctuation punctuation">|</span></span> home<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">".wasmrun"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">"bin"</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>plugin_name<span class="token punctuation">)</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">unwrap_or_else</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span><span class="token closure-punctuation punctuation">|</span></span> <span class="token class-name">PathBuf</span><span class="token punctuation">::</span><span class="token function">from</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>plugin_name<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <br>        <span class="token keyword">let</span> plugin_binary <span class="token operator">=</span> <span class="token keyword">if</span> wasmrun_bin_path<span class="token punctuation">.</span><span class="token function">exists</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            wasmrun_bin_path<span class="token punctuation">.</span><span class="token function">to_string_lossy</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token keyword">self</span><span class="token punctuation">.</span>plugin_name<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>        <span class="token keyword">let</span> output <span class="token operator">=</span> <span class="token namespace">std<span class="token punctuation">::</span>process<span class="token punctuation">::</span></span><span class="token class-name">Command</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token operator">&amp;</span>plugin_binary<span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">args</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"compile"</span><span class="token punctuation">,</span> <span class="token string">"-p"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>config<span class="token punctuation">.</span>project_path<span class="token punctuation">]</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">args</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token string">"-o"</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>config<span class="token punctuation">.</span>output_dir<span class="token punctuation">]</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">output</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br><br>        <span class="token comment">// Process result and return BuildResult struct</span><br>        <span class="token comment">// ... result processing ...</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="plugin-manager-integration" tabindex="-1">Plugin Manager Integration</h2>
<p>The plugin system is managed through a central <code>PluginManager</code> that handles both built-in and external plugins:</p>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">PluginManager</span> <span class="token punctuation">{</span><br>    builtin_plugins<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token class-name">Plugin</span><span class="token operator">>></span><span class="token punctuation">,</span><br>    external_plugins<span class="token punctuation">:</span> <span class="token class-name">HashMap</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token punctuation">,</span> <span class="token class-name">Box</span><span class="token operator">&lt;</span><span class="token keyword">dyn</span> <span class="token class-name">Plugin</span><span class="token operator">>></span><span class="token punctuation">,</span><br>    config<span class="token punctuation">:</span> <span class="token class-name">WasmrunConfig</span><span class="token punctuation">,</span><br>    plugin_stats<span class="token punctuation">:</span> <span class="token class-name">PluginStats</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">impl</span> <span class="token class-name">PluginManager</span> <span class="token punctuation">{</span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token keyword">Self</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> config <span class="token operator">=</span> <span class="token class-name">WasmrunConfig</span><span class="token punctuation">::</span><span class="token function">load</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">unwrap_or_default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">let</span> <span class="token keyword">mut</span> manager <span class="token operator">=</span> <span class="token keyword">Self</span> <span class="token punctuation">{</span><br>            builtin_plugins<span class="token punctuation">:</span> <span class="token macro property">vec!</span><span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">,</span><br>            external_plugins<span class="token punctuation">:</span> <span class="token class-name">HashMap</span><span class="token punctuation">::</span><span class="token function">new</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            config<span class="token punctuation">,</span><br>            plugin_stats<span class="token punctuation">:</span> <span class="token class-name">PluginStats</span><span class="token punctuation">::</span><span class="token function">default</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>        <span class="token punctuation">}</span><span class="token punctuation">;</span><br><br>        manager<span class="token punctuation">.</span><span class="token function">load_all_plugins</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br>        manager<span class="token punctuation">.</span><span class="token function">update_stats</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token class-name">Ok</span><span class="token punctuation">(</span>manager<span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">fn</span> <span class="token function-definition function">load_all_plugins</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token comment">// Load built-in plugins</span><br>        <span class="token function">load_all_builtin_plugins</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">.</span>builtin_plugins<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br><br>        <span class="token comment">// Load enabled external plugins</span><br>        <span class="token keyword">for</span> <span class="token punctuation">(</span>name<span class="token punctuation">,</span> entry<span class="token punctuation">)</span> <span class="token keyword">in</span> <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>external_plugins <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> entry<span class="token punctuation">.</span>enabled <span class="token punctuation">{</span><br>                <span class="token keyword">match</span> <span class="token class-name">ExternalPluginLoader</span><span class="token punctuation">::</span><span class="token function">load</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                    <span class="token class-name">Ok</span><span class="token punctuation">(</span>plugin<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>                        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"✅ Loaded external plugin: {name}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                        <span class="token keyword">self</span><span class="token punctuation">.</span>external_plugins<span class="token punctuation">.</span><span class="token function">insert</span><span class="token punctuation">(</span>name<span class="token punctuation">.</span><span class="token function">clone</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> plugin<span class="token punctuation">)</span><span class="token punctuation">;</span><br>                    <span class="token punctuation">}</span><br>                    <span class="token class-name">Err</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token punctuation">{</span><br>                        <span class="token macro property">eprintln!</span><span class="token punctuation">(</span><span class="token string">"⚠️  Failed to load external plugin '{name}': {e}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>                    <span class="token punctuation">}</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">find_plugin_for_project</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> project_path<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token keyword">dyn</span> <span class="token class-name">Plugin</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token comment">// External plugins have priority</span><br>        <span class="token keyword">for</span> plugin <span class="token keyword">in</span> <span class="token keyword">self</span><span class="token punctuation">.</span>external_plugins<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> plugin<span class="token punctuation">.</span><span class="token function">can_handle_project</span><span class="token punctuation">(</span>project_path<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token keyword">return</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>plugin<span class="token punctuation">.</span><span class="token function">as_ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token comment">// Fallback to built-in plugins</span><br>        <span class="token keyword">for</span> plugin <span class="token keyword">in</span> <span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">.</span>builtin_plugins <span class="token punctuation">{</span><br>            <span class="token keyword">if</span> plugin<span class="token punctuation">.</span><span class="token function">can_handle_project</span><span class="token punctuation">(</span>project_path<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token keyword">return</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>plugin<span class="token punctuation">.</span><span class="token function">as_ref</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token class-name">None</span><br>    <span class="token punctuation">}</span><br><br>    <span class="token comment">// Plugin management methods</span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">install_plugin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span> plugin_name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">update_plugin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span> plugin_name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">enable_plugin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span> plugin_name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">disable_plugin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span> plugin_name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span> <span class="token comment">/* ... */</span> <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<p>This hybrid architecture gives us the best of both worlds: type-safe, performant built-in plugins for core languages, and the flexibility to extend the system with external plugins for specialized use cases.</p>
<h2 id="advanced-features" tabindex="-1">Advanced Features</h2>
<h3 id="plugin-health-monitoring" tabindex="-1">Plugin Health Monitoring</h3>
<p>The plugin system includes comprehensive health checking. Don’t have much support for it, but playing around it, so should have full support for health check soon.</p>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">enum</span> <span class="token type-definition class-name">PluginHealthStatus</span> <span class="token punctuation">{</span><br>    <span class="token class-name">Healthy</span><span class="token punctuation">,</span><br>    <span class="token class-name">MissingDependencies</span><span class="token punctuation">(</span><span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>    <span class="token class-name">NotFound</span><span class="token punctuation">,</span><br>    <span class="token class-name">LoadError</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">impl</span> <span class="token class-name">PluginManager</span> <span class="token punctuation">{</span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">check_plugin_health</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> plugin_name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token class-name">PluginHealthStatus</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token keyword">if</span> <span class="token operator">!</span><span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">is_plugin_installed</span><span class="token punctuation">(</span>plugin_name<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token class-name">PluginHealthStatus</span><span class="token punctuation">::</span><span class="token class-name">NotFound</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token keyword">let</span> missing_deps <span class="token operator">=</span> <span class="token class-name">PluginRegistry</span><span class="token punctuation">::</span><span class="token function">check_plugin_dependencies</span><span class="token punctuation">(</span>plugin_name<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">if</span> <span class="token operator">!</span>missing_deps<span class="token punctuation">.</span><span class="token function">is_empty</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">return</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token class-name">PluginHealthStatus</span><span class="token punctuation">::</span><span class="token class-name">MissingDependencies</span><span class="token punctuation">(</span>missing_deps<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token comment">// Try to load the plugin to ensure it's functional</span><br>        <span class="token keyword">if</span> <span class="token keyword">let</span> <span class="token class-name">Some</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span> <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span>config<span class="token punctuation">.</span>external_plugins<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>plugin_name<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>            <span class="token keyword">match</span> <span class="token class-name">ExternalPluginLoader</span><span class="token punctuation">::</span><span class="token function">load</span><span class="token punctuation">(</span>entry<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                <span class="token class-name">Ok</span><span class="token punctuation">(</span>_<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token class-name">PluginHealthStatus</span><span class="token punctuation">::</span><span class="token class-name">Healthy</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>                <span class="token class-name">Err</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token operator">=></span> <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token class-name">PluginHealthStatus</span><span class="token punctuation">::</span><span class="token class-name">LoadError</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span><span class="token function">to_string</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">,</span><br>            <span class="token punctuation">}</span><br>        <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>            <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token class-name">PluginHealthStatus</span><span class="token punctuation">::</span><span class="token class-name">Healthy</span><span class="token punctuation">)</span><br>        <span class="token punctuation">}</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="plugin-updates-and-version-management" tabindex="-1">Plugin Updates and Version Management</h3>
<p>The system supports automatic plugin updates:</p>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">impl</span> <span class="token class-name">PluginManager</span> <span class="token punctuation">{</span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">update_plugin</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">mut</span> <span class="token keyword">self</span><span class="token punctuation">,</span> plugin_name<span class="token punctuation">:</span> <span class="token operator">&amp;</span><span class="token keyword">str</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Result</span><span class="token operator">&lt;</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token keyword">let</span> current_version <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">get_current_plugin_version</span><span class="token punctuation">(</span>plugin_name<span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">let</span> latest_version <span class="token operator">=</span> <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">get_latest_plugin_version</span><span class="token punctuation">(</span>plugin_name<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br><br>        <span class="token keyword">if</span> current_version <span class="token operator">==</span> latest_version <span class="token punctuation">{</span><br>            <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"✅ Plugin '{plugin_name}' is already up to date"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>            <span class="token keyword">return</span> <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token punctuation">}</span><br><br>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"⬆️  Updating from v{current_version} to v{latest_version}"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">reinstall_external_plugin</span><span class="token punctuation">(</span>plugin_name<span class="token punctuation">,</span> <span class="token operator">&amp;</span>latest_version<span class="token punctuation">)</span><span class="token operator">?</span><span class="token punctuation">;</span><br>        <span class="token macro property">println!</span><span class="token punctuation">(</span><span class="token string">"✅ Plugin updated successfully"</span><span class="token punctuation">)</span><span class="token punctuation">;</span><br>        <span class="token class-name">Ok</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="enhanced-build-configuration" tabindex="-1">Enhanced Build Configuration</h3>
<p>Modern build configuration uses structured data instead of simple string parameters:</p>
<pre class="language-rust"><code class="language-rust"><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">BuildConfig</span> <span class="token punctuation">{</span><br>    <span class="token keyword">pub</span> project_path<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> output_dir<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> optimization_level<span class="token punctuation">:</span> <span class="token class-name">OptimizationLevel</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> target_format<span class="token punctuation">:</span> <span class="token class-name">TargetFormat</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> enable_debug<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> custom_args<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">BuildResult</span> <span class="token punctuation">{</span><br>    <span class="token keyword">pub</span> wasm_path<span class="token punctuation">:</span> <span class="token class-name">String</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> js_path<span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> additional_files<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> is_wasm_bindgen<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">,</span><br><span class="token punctuation">}</span></code></pre>
<h3 id="plugin-capabilities-system" tabindex="-1">Plugin Capabilities System</h3>
<p>Rich capability detection allows for better plugin selection:</p>
<pre class="language-rust"><code class="language-rust"><span class="token attribute attr-name">#[derive(Debug, Clone, Serialize, Deserialize)]</span><br><span class="token keyword">pub</span> <span class="token keyword">struct</span> <span class="token type-definition class-name">PluginCapabilities</span> <span class="token punctuation">{</span><br>    <span class="token keyword">pub</span> compile_wasm<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> compile_webapp<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> live_reload<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> optimization<span class="token punctuation">:</span> <span class="token keyword">bool</span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> custom_targets<span class="token punctuation">:</span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">></span><span class="token punctuation">,</span><br>    <span class="token keyword">pub</span> supported_languages<span class="token punctuation">:</span> <span class="token class-name">Option</span><span class="token operator">&lt;</span><span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token class-name">String</span><span class="token operator">>></span><span class="token punctuation">,</span><br><span class="token punctuation">}</span><br><br><span class="token keyword">impl</span> <span class="token class-name">PluginManager</span> <span class="token punctuation">{</span><br>    <span class="token keyword">pub</span> <span class="token keyword">fn</span> <span class="token function-definition function">get_plugins_by_capability</span><span class="token punctuation">(</span><span class="token operator">&amp;</span><span class="token keyword">self</span><span class="token punctuation">,</span> capability<span class="token punctuation">:</span> <span class="token class-name">PluginCapabilityFilter</span><span class="token punctuation">)</span> <span class="token punctuation">-></span> <span class="token class-name">Vec</span><span class="token operator">&lt;</span><span class="token operator">&amp;</span><span class="token class-name">PluginInfo</span><span class="token operator">></span> <span class="token punctuation">{</span><br>        <span class="token comment">// Filter plugins based on specific capabilities</span><br>        <span class="token keyword">self</span><span class="token punctuation">.</span>builtin_plugins<span class="token punctuation">.</span><span class="token function">iter</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">chain</span><span class="token punctuation">(</span><span class="token keyword">self</span><span class="token punctuation">.</span>external_plugins<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">filter_map</span><span class="token punctuation">(</span><span class="token closure-params"><span class="token closure-punctuation punctuation">|</span>p<span class="token closure-punctuation punctuation">|</span></span> <span class="token punctuation">{</span><br>                <span class="token keyword">if</span> <span class="token keyword">self</span><span class="token punctuation">.</span><span class="token function">matches_capability_filter</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span> <span class="token operator">&amp;</span>capability<span class="token punctuation">)</span> <span class="token punctuation">{</span><br>                    <span class="token class-name">Some</span><span class="token punctuation">(</span>p<span class="token punctuation">.</span><span class="token function">info</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><br>                <span class="token punctuation">}</span> <span class="token keyword">else</span> <span class="token punctuation">{</span><br>                    <span class="token class-name">None</span><br>                <span class="token punctuation">}</span><br>            <span class="token punctuation">}</span><span class="token punctuation">)</span><br>            <span class="token punctuation">.</span><span class="token function">collect</span><span class="token punctuation">(</span><span class="token punctuation">)</span><br>    <span class="token punctuation">}</span><br><span class="token punctuation">}</span></code></pre>
<h2 id="current-built-in-languages" tabindex="-1">Current Built-in Languages</h2>
<p>The system currently ships with these built-in plugins:</p>
<ul>
<li>
<p><strong>C/C++</strong>: Using Emscripten for compilation</p>
</li>
<li>
<p><strong>AssemblyScript</strong>: TypeScript-like syntax for WebAssembly</p>
</li>
<li>
<p><strong>Python</strong>: Using py2wasm or similar tools</p>
</li>
</ul>
<h2 id="external-plugin-ecosystem" tabindex="-1">External Plugin Ecosystem</h2>
<p>Popular external plugins available through <code>cargo install</code>:</p>
<ul>
<li>
<p><a href="https://github.com/anistark/wasmrust"><strong>wasmrust</strong></a>: Rust to WebAssembly compilation</p>
</li>
<li>
<p><a href="https://github.com/anistark/wasmgo"><strong>wasmgo</strong></a>: Go to WebAssembly compilation</p>
</li>
</ul>
<p>Installation is as simple as:</p>
<pre class="language-bash"><code class="language-bash">wasmrun plugin <span class="token function">install</span> wasmrust<br>wasmrun plugin <span class="token builtin class-name">enable</span> wasmrust <span class="token comment"># Optional</span></code></pre>
<p>This architecture has proven robust and extensible, allowing the wasmrun ecosystem to grow organically while maintaining excellent performance and reliability.</p>
<p><img src="/images/posts/69dd0e7d-110c-4b58-9fe7-3b91d1b12eed.png" alt=""></p>
<blockquote>
<p>So, if you want to make your version of rust plugin and use it with wasmrun, you can. For instance, there can be various tools for compiling rust project through wasm target, and you’ve a special plugin which fits your use-case.</p>
</blockquote>
<p>Current stable version of wasmrun is <a href="https://crates.io/crates/wasmrun">v0.11.3</a>. 🚀 Try out our plugin system. 🙌</p>

        </div>

        <div class="article-end">
            <span>✦</span>
            <span>✦</span>
            <span>✦</span>
        </div>

        <div class="post-navigation">
            <div class="post-nav-item post-nav-previous">
                    <a href="/rust-plugin-system/">
                        <span class="nav-arrow">←</span>
                        <div class="nav-content">
                            <p class="nav-label">Previous</p>
                            <p class="nav-title">Building a Rust Plugin System</p>
                        </div>
                    </a>
                
            </div>

            <div class="post-nav-item post-nav-next">
                    <a href="/create-your-own-wasm-plugin/">
                        <div class="nav-content">
                            <p class="nav-label">Next</p>
                            <p class="nav-title">Create your own wasm plugin</p>
                        </div>
                        <span class="nav-arrow">→</span>
                    </a>
                
            </div>
        </div>
    </div>

    </main>
    <footer class="sticky bottom-0 z-50 glass-footer py-4">
  <div class="container mx-auto max-w-5xl px-8 flex items-center justify-between">
    <div class="text-sm">
      Blog by Ani
    </div>

    <div class="flex items-center">
      <a href="https://anirudha.dev" target="_blank" rel="noopener noreferrer" class="footer-icon" aria-label="Home">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6" />
        </svg>
      </a>
    </div>

    <div class="flex items-center gap-4">
      <a href="https://github.com/anistark" target="_blank" rel="noopener noreferrer" class="footer-icon" aria-label="GitHub">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 0c-6.626 0-12 5.373-12 12 0 5.302 3.438 9.8 8.207 11.387.599.111.793-.261.793-.577v-2.234c-3.338.726-4.033-1.416-4.033-1.416-.546-1.387-1.333-1.756-1.333-1.756-1.089-.745.083-.729.083-.729 1.205.084 1.839 1.237 1.839 1.237 1.07 1.834 2.807 1.304 3.492.997.107-.775.418-1.305.762-1.604-2.665-.305-5.467-1.334-5.467-5.931 0-1.311.469-2.381 1.236-3.221-.124-.303-.535-1.524.117-3.176 0 0 1.008-.322 3.301 1.23.957-.266 1.983-.399 3.003-.404 1.02.005 2.047.138 3.006.404 2.291-1.552 3.297-1.23 3.297-1.23.653 1.653.242 2.874.118 3.176.77.84 1.235 1.911 1.235 3.221 0 4.609-2.807 5.624-5.479 5.921.43.372.823 1.102.823 2.222v3.293c0 .319.192.694.801.576 4.765-1.589 8.199-6.086 8.199-11.386 0-6.627-5.373-12-12-12z"/>
        </svg>
      </a>
      <a href="https://x.com/kranirudha" target="_blank" rel="noopener noreferrer" class="footer-icon" aria-label="X (Twitter)">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M18.244 2.25h3.308l-7.227 8.26 8.502 11.24H16.17l-5.214-6.817L4.99 21.75H1.68l7.73-8.835L1.254 2.25H8.08l4.713 6.231zm-1.161 17.52h1.833L7.084 4.126H5.117z"/>
        </svg>
      </a>
      <a href="https://linkedin.com/in/kranirudha" target="_blank" rel="noopener noreferrer" class="footer-icon" aria-label="LinkedIn">
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="currentColor" viewBox="0 0 24 24">
          <path d="M4.98 3.5c0 1.381-1.11 2.5-2.48 2.5s-2.48-1.119-2.48-2.5c0-1.38 1.11-2.5 2.48-2.5s2.48 1.12 2.48 2.5zm.02 4.5h-5v16h5v-16zm7.982 0h-4.968v16h4.969v-8.399c0-4.67 6.029-5.052 6.029 0v8.399h4.988v-10.131c0-7.88-8.922-7.593-11.018-3.714v-2.155z"/>
        </svg>
      </a>
    </div>
  </div>
</footer>
    
    <script src="https://unpkg.com/clipboard@2/dist/clipboard.min.js"></script>
    <script src="/assets/main.bundle.js"></script>
  </body>
</html>
